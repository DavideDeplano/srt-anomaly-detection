random_seed: 42

# Project paths
paths:
  data: data                    # Raw and preprocessed datasets
  models: models                # Stored models (UMAP, KDE, GMM, etc.)
  results: results              # Output files, rankings, figures
  logs: logs                    # Log files

simulation:
  output_dir: "simulated/cadences"

  # Number of base panel sets (each expanded into mask_combinations cadences)
  n_panel_sets: 20

  # Frame parameters for synthetic panels
  fchans: 80
  tchans: 16
  df_hz: 2.75
  dt_s: 18.75
  fch1_mhz: 1420.0
  noise_mean: 10
  noise_type: "chi2"

  # Signal parameter ranges
  amplitude_factor: [0.0, 20.0] # 4x max noise
  drift_rate_hz_s: [-4.0, 4.0]
  width_hz: [20.0, 80.0]

  # Cadence structure
  panels_per_cadence: 6          # 3 ON + 3 OFF
  mask_combinations: 64          # 2^6

# Pipeline configuration
pipeline:
  top_k: 1000                    # Number of top candidates to export

# Filters configuration
filters:

  # -------------------------------------------------------------
  # Density filter (UMAP + KDE on 15-D CC features)
  # -------------------------------------------------------------
  density:
    # UMAP hyperparameters
    n_neighbors: 25
    min_dist: 0.01
    umap_metric: "canberra"
    n_components: 2

    # KDE hyperparameters
    kde_bandwidth: 0.30
    kernel: "exponential"

    # Category configuration
    threshold: 0.0618             # Threshold for only-on class detection
    only_on_category: 21          # Pattern ID used for ON-OFF-ON-OFF-ON-OFF

    # Path
    umap_model_path: "models/umap_density.pkl"
    kde_models_dir: "models/kde_density/"

  # -------------------------------------------------------------
  # Frequency filter (GMM bagging on per-band frequencies)
  # -------------------------------------------------------------
  frequency:
    # Number of GMM components per band
    n_components_L: 200
    n_components_S: 200
    n_components_C: 50

    # Bagging settings
    n_bags: 10                    # Number of GMMs per band
    bag_size: 5000                # Size of each subsample

    # Scoring options
    invert_density: true          # Higher = more anomalous
    rescale_0_1: true             # Normalize final score in [0,1]

    # Path
    gmm_model_path: "models/gmm_frequency.joblib"

  # -------------------------------------------------------------
  # Similarity filter (UMAP on downsampled panels)
  # -------------------------------------------------------------
  similarity:
    # UMAP hyperparameters
    n_neighbors: 25
    min_dist: 0.01
    umap_metric: "euclidean"      # 2D embedding of the 6 panels
    n_components: 2

    #Path
    umap_model_path: "models/umap_similarity.joblib"

    # Scoring options
    rescale_0_1: true             # Normalize similarity score in [0,1]

# Logging
logging:
  level: INFO
  file: logs/run.log
